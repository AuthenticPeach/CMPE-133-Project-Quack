<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quack Chat</title>
    <link rel="stylesheet" href="/pages/ChatPage/chat.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link
      href="https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Navbar for mobile version -->
    <header id="mobileNavbar">
      <a href="#"
        ><img
          src="https://res.cloudinary.com/dxseoqcpb/image/upload/v1729235477/base/s2oml4n1wafnfoa650gi.png"
          class="logo"
          alt="logo"
      /></a>

      <h2 id="roomNameMobile"></h2>

      <input type="checkbox" id="menu_bar" />
      <label for="menu_bar"><i class="bx bx-user"></i></label>

      <div class="navbar">
        <ul>
          <li>
            <a href="/profile">
              <img
                src=""
                alt=""
                class="profile-pic"
                style="width: 40px; height: 40px; object-fit: cover"
              />
              <p class="full-name"></p>
            </a>
          </li>
          <li>
            <a href="/signin" onclick="localStorage.removeItem('username')">
              <i class="bx bx-log-out icon"></i>
              <span>Logout</span>
            </a>
          </li>
        </ul>
      </div>
    </header>

    <header id="mobileNavbarBottom">
      <div class="navbar">
        <ul>
          <li>
            <a href="/user-dashboard">
              <i class="bx bx-home-alt icon"></i>
              <span>Dashboard</span>
            </a>
          </li>
          <li>
            <a href="/messages">
              <i class="bx bx-message-rounded icon"></i>
              <span>Inbox</span>
            </a>
          </li>
          <li>
            <a href="#" class="contact-btn">
              <i class="bx bxs-contact icon"></i>
              <span class="contactText">Contact</span>
            </a>
          </li>
          <li>
            <a href="#" class="favorite-btn">
              <i class="bx bx-heart icon"></i>
              <span class="favoriteText">Favorites</span>
            </a>
          </li>
        </ul>
      </div>
    </header>

    <nav class="sidebar close">
      <header>
        <div class="image-text">
          <span class="image">
            <img
              src="https://res.cloudinary.com/dxseoqcpb/image/upload/v1729235477/base/s2oml4n1wafnfoa650gi.png"
              alt="Quack Logo"
            />
          </span>

          <div class="text logo-text">
            <span class="name">QUACK.</span>
          </div>
        </div>

        <i class="bx bx-chevron-right toggle"></i>
      </header>

      <div class="menu-bar">
        <div class="menu">
          <ul class="menu-links">
            <li class="nav-link">
              <a href="/user-dashboard">
                <i class="bx bx-home-alt icon"></i>
                <span class="text nav-text">Dashboard</span>
              </a>
            </li>

            <li class="nav-link">
              <a href="#">
                <i class="bx bx-message-rounded icon"></i>
                <span class="text nav-text">Inbox</span>
              </a>
            </li>

            <li class="nav-link">
              <a href="#" class="contact-btn">
                <i class="bx bxs-contact icon"></i>
                <span class="text nav-text contactText">Contact</span>
              </a>
            </li>

            <li class="nav-link">
              <a href="#" class="favorite-btn">
                <i class="bx bx-heart icon"></i>
                <span class="text nav-text favoriteText">Favorites</span>
              </a>
            </li>
          </ul>
        </div>

        <div class="bottom-content">
          <li class="">
            <a href="signin" onclick="localStorage.removeItem('username')">
              <i class="bx bx-log-out icon"></i>
              <span class="text nav-text">Logout</span>
            </a>
          </li>

          <li class="">
            <a href="profile">
              <img
                src=""
                alt=""
                class="profile-pic"
                style="width: 40px; margin: 10px; height: auto"
              />
              <p class="text nav-text full-name"></p>
            </a>
          </li>
        </div>
      </div>
    </nav>

    <!-- New Sidebar (Hidden Initially) -->
    <nav class="sidebar2">
      <h1 id="title">CONTACT</h1>
      <div id="search-container">
        <input type="text" id="search-input" placeholder="Search users">
        <ul id="search-results"></ul>
      </div>
      <ul
        class="contactList"
        style="
          display: none;
          overflow-y: auto;
          max-height: calc(100vh - 90px);
          overflow-x: hidden;
        "
      ></ul>
      <ul
        class="favoriteList"
        style="
          display: none;
          overflow-y: auto;
          max-height: calc(100vh - 90px);
          overflow-x: hidden;
        "
      ></ul>
    </nav>

    <section class="home" style="overflow-y: hidden;">
      <div id="" class="col1" style="overflow: hidden;">
        <h2 id="roomName"></h2>

        <div id="message_container">
          <ul id="messages">
          </ul>
        </div>
        <form id="form">
          <div style="display: flex">
            <label for="image-input" style="margin: auto 10px auto 0"
              ><i class="bx bxs-plus-circle" id="uploadFileBtn"></i
            ></label>
            <input
              type="file"
              id="image-input"
              accept="image/*,.txt,.pdf"
              style="display: none; visibility: none"
              onchange="getFile(this.value)"
            />
            <div style="display: grid; grid-template-columns: 1fr; width: 100%">
              <div id="display-file" style="display: none">
                <p id="file-name" style="margin: auto"></p>
                <button
                  type="button"
                  id="cancel-upload"
                  onclick="cancelFileUpload()"
                >
                  <i class="bx bxs-x-circle"></i>
                </button>
              </div>
              <div id="reply-preview" style="display: none;"></div>
              <input
                id="input"
                autocomplete="off"
                placeholder="Type a message..."
              />
              <button id="emoji-button" type="button">ðŸ˜€</button>
            </div>

            <button type="submit" id="sendBtn">
              <i class="bx bxs-send"></i>
            </button>
          </div>
        </form>
        <p id="typing"></p>
      </div>

      <div id="users-section" class="col2">
        <h2 style="padding: 17px 0;">Online Users:</h2>
        <ul id="users"></ul>
        <!-- List of connected users -->
      </div>

      <!-- Profile Modal -->
      <div id="profileModal" class="modal">
        <div class="modal-content">
          <span class="closeBtn">&times;</span>
          <h2 style="text-align: left;">Profile</h2>
          <img id="profile-modal-pic" src="/uploads/default-avatar.png" alt="Profile Picture">
          <h2 id="profile-modal-username">Username</h2>
          <div id="social_media" style="margin-bottom: 10px;"></div>
          <p id="profile-modal-bio">Bio</p>
          <div>
            <button id="addFriendBtn" style="margin-right: 5px;">Add Friend</button>
            <button id="reportBtn">Report</button>
          </div>
          <!-- Add other profile fields as needed -->
        </div>
      </div>
    </section>

    <script src="/socket.io/socket.io.js"></script>
    <script src="https://unpkg.com/emoji-button@latest"></script>
    <script src="/pages/ChatPage/chat.js"></script>
  </body>
</html>
